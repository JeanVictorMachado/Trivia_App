{"ast":null,"code":"import md5 from 'crypto-js/md5';\nimport { getAccessToken, getTriviaQuestion } from '../../services/triviaApi';\nexport const LOGIN = 'LOGIN';\nexport function loginActionCreator({\n  name,\n  email\n}) {\n  const hashedEmail = md5(email);\n  const avatar = `https://www.gravatar.com/avatar/${hashedEmail}`;\n  return {\n    type: LOGIN,\n    payload: {\n      name,\n      email,\n      avatar\n    }\n  };\n}\nexport const GET_QUESTIONS = 'GET_QUESTIONS';\n\nfunction loadQuestions({\n  questions,\n  token\n}) {\n  return {\n    type: GET_QUESTIONS,\n    payload: {\n      questions,\n      token\n    }\n  };\n}\n\nexport function fetchQuestions(token) {\n  return async dispatch => {\n    let validToken = token;\n\n    if (!validToken) {\n      validToken = await getAccessToken();\n      localStorage.setItem('token', validToken);\n    }\n\n    let questions = await getTriviaQuestion(validToken);\n\n    if (!questions.length) {\n      validToken = await getAccessToken();\n      questions = await getTriviaQuestion(validToken);\n      localStorage.setItem('token', validToken);\n    }\n\n    dispatch(loadQuestions({\n      questions,\n      token: validToken\n    }));\n  };\n}","map":{"version":3,"sources":["/home/jean/Trybe/projetos-Trybe/sd-06-project-trivia-react-redux/src/redux/actions/index.js"],"names":["md5","getAccessToken","getTriviaQuestion","LOGIN","loginActionCreator","name","email","hashedEmail","avatar","type","payload","GET_QUESTIONS","loadQuestions","questions","token","fetchQuestions","dispatch","validToken","localStorage","setItem","length"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,eAAhB;AACA,SAASC,cAAT,EAAyBC,iBAAzB,QAAkD,0BAAlD;AAEA,OAAO,MAAMC,KAAK,GAAG,OAAd;AAEP,OAAO,SAASC,kBAAT,CAA4B;AAAEC,EAAAA,IAAF;AAAQC,EAAAA;AAAR,CAA5B,EAA6C;AAClD,QAAMC,WAAW,GAAGP,GAAG,CAACM,KAAD,CAAvB;AACA,QAAME,MAAM,GAAI,mCAAkCD,WAAY,EAA9D;AAEA,SAAO;AACLE,IAAAA,IAAI,EAAEN,KADD;AAELO,IAAAA,OAAO,EAAE;AACPL,MAAAA,IADO;AAEPC,MAAAA,KAFO;AAGPE,MAAAA;AAHO;AAFJ,GAAP;AAQD;AAED,OAAO,MAAMG,aAAa,GAAG,eAAtB;;AAEP,SAASC,aAAT,CAAuB;AAAEC,EAAAA,SAAF;AAAaC,EAAAA;AAAb,CAAvB,EAA6C;AAC3C,SAAO;AACLL,IAAAA,IAAI,EAAEE,aADD;AAELD,IAAAA,OAAO,EAAE;AACPG,MAAAA,SADO;AAEPC,MAAAA;AAFO;AAFJ,GAAP;AAOD;;AAED,OAAO,SAASC,cAAT,CAAwBD,KAAxB,EAA+B;AACpC,SACE,MAAOE,QAAP,IAAoB;AAClB,QAAIC,UAAU,GAAGH,KAAjB;;AAEA,QAAI,CAACG,UAAL,EAAiB;AACfA,MAAAA,UAAU,GAAG,MAAMhB,cAAc,EAAjC;AACAiB,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,UAA9B;AACD;;AAED,QAAIJ,SAAS,GAAG,MAAMX,iBAAiB,CAACe,UAAD,CAAvC;;AAEA,QAAI,CAACJ,SAAS,CAACO,MAAf,EAAuB;AACrBH,MAAAA,UAAU,GAAG,MAAMhB,cAAc,EAAjC;AACAY,MAAAA,SAAS,GAAG,MAAMX,iBAAiB,CAACe,UAAD,CAAnC;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,UAA9B;AACD;;AAEDD,IAAAA,QAAQ,CAACJ,aAAa,CAAC;AACrBC,MAAAA,SADqB;AAErBC,MAAAA,KAAK,EAAEG;AAFc,KAAD,CAAd,CAAR;AAID,GArBH;AAuBD","sourcesContent":["import md5 from 'crypto-js/md5';\nimport { getAccessToken, getTriviaQuestion } from '../../services/triviaApi';\n\nexport const LOGIN = 'LOGIN';\n\nexport function loginActionCreator({ name, email }) {\n  const hashedEmail = md5(email);\n  const avatar = `https://www.gravatar.com/avatar/${hashedEmail}`;\n\n  return {\n    type: LOGIN,\n    payload: {\n      name,\n      email,\n      avatar,\n    },\n  };\n}\n\nexport const GET_QUESTIONS = 'GET_QUESTIONS';\n\nfunction loadQuestions({ questions, token }) {\n  return {\n    type: GET_QUESTIONS,\n    payload: {\n      questions,\n      token,\n    },\n  };\n}\n\nexport function fetchQuestions(token) {\n  return (\n    async (dispatch) => {\n      let validToken = token;\n\n      if (!validToken) {\n        validToken = await getAccessToken();\n        localStorage.setItem('token', validToken);\n      }\n\n      let questions = await getTriviaQuestion(validToken);\n\n      if (!questions.length) {\n        validToken = await getAccessToken();\n        questions = await getTriviaQuestion(validToken);\n        localStorage.setItem('token', validToken);\n      }\n\n      dispatch(loadQuestions({\n        questions,\n        token: validToken,\n      }));\n    }\n  );\n}\n"]},"metadata":{},"sourceType":"module"}