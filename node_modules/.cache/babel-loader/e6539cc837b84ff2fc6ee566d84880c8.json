{"ast":null,"code":"var _jsxFileName = \"/home/jean/projetos-pessoais-portifolio/Trivia_App/src/pages/Results/index.jsx\";\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport md5 from 'crypto-js/md5';\nimport Header from '../../components/Header';\nimport './styles.css';\n\nclass Results extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleRankingUpdate = this.handleRankingUpdate.bind(this);\n    const userScore = JSON.parse(localStorage.getItem('state')).player;\n    this.state = {\n      assertions: userScore.assertions,\n      score: userScore.score,\n      breakpoint: 3,\n      userScore\n    };\n  }\n\n  componentDidMount() {\n    this.handleRankingUpdate();\n  }\n\n  handleRankingUpdate() {\n    const _this$state$userScore = this.state.userScore,\n          name = _this$state$userScore.name,\n          score = _this$state$userScore.score,\n          gravatarEmail = _this$state$userScore.gravatarEmail;\n    const ranking = JSON.parse(localStorage.getItem('ranking')) || [];\n    const hashedEmail = md5(gravatarEmail);\n    const picture = `https://www.gravatar.com/avatar/${hashedEmail}`;\n    ranking.push({\n      name,\n      score,\n      picture\n    });\n    ranking.sort((a, b) => b.score - a.score);\n    localStorage.setItem('ranking', JSON.stringify(ranking));\n  }\n\n  render() {\n    const _this$state = this.state,\n          assertions = _this$state.assertions,\n          breakpoint = _this$state.breakpoint,\n          score = _this$state.score;\n    return React.createElement(\"div\", {\n      className: \"results-page\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"results-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      \"data-testid\": \"feedback-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, assertions < breakpoint ? 'Podia ser melhor... ' : 'Mandou bem!'), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, \"Seu Score:\", React.createElement(\"span\", {\n      \"data-testid\": \"feedback-total-score\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, score), \"pts\"), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, \"Voc\\xEA acertou:\", React.createElement(\"span\", {\n      \"data-testid\": \"feedback-total-question\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, assertions)), React.createElement(\"div\", {\n      className: \"navigation-links\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/\",\n      \"data-testid\": \"btn-play-again\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, \"Jogar novamente\"), React.createElement(Link, {\n      to: \"/ranking\",\n      \"data-testid\": \"btn-ranking\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"Ver Ranking\"))));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    score: state.user.score\n  };\n}\n\nexport default connect(mapStateToProps, null)(Results);","map":{"version":3,"sources":["/home/jean/projetos-pessoais-portifolio/Trivia_App/src/pages/Results/index.jsx"],"names":["React","Link","connect","md5","Header","Results","Component","constructor","props","handleRankingUpdate","bind","userScore","JSON","parse","localStorage","getItem","player","state","assertions","score","breakpoint","componentDidMount","name","gravatarEmail","ranking","hashedEmail","picture","push","sort","a","b","setItem","stringify","render","mapStateToProps","user"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,GAAP,MAAgB,eAAhB;AAEA,OAAOC,MAAP,MAAmB,yBAAnB;AAEA,OAAO,cAAP;;AAEA,MAAMC,OAAN,SAAsBL,KAAK,CAACM,SAA5B,CAAsC;AACpCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AAEA,SAAKC,mBAAL,GAA2B,KAAKA,mBAAL,CAAyBC,IAAzB,CAA8B,IAA9B,CAA3B;AAEA,UAAMC,SAAS,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX,EAA0CC,MAA5D;AAEA,SAAKC,KAAL,GAAa;AACXC,MAAAA,UAAU,EAAEP,SAAS,CAACO,UADX;AAEXC,MAAAA,KAAK,EAAER,SAAS,CAACQ,KAFN;AAGXC,MAAAA,UAAU,EAAE,CAHD;AAIXT,MAAAA;AAJW,KAAb;AAMD;;AAEDU,EAAAA,iBAAiB,GAAG;AAClB,SAAKZ,mBAAL;AACD;;AAEDA,EAAAA,mBAAmB,GAAG;AAAA,kCACkC,KAAKQ,KADvC,CACZN,SADY;AAAA,UACCW,IADD,yBACCA,IADD;AAAA,UACOH,KADP,yBACOA,KADP;AAAA,UACcI,aADd,yBACcA,aADd;AAEpB,UAAMC,OAAO,GAAGZ,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,KAA+C,EAA/D;AAEA,UAAMU,WAAW,GAAGtB,GAAG,CAACoB,aAAD,CAAvB;AACA,UAAMG,OAAO,GAAI,mCAAkCD,WAAY,EAA/D;AAEAD,IAAAA,OAAO,CAACG,IAAR,CAAa;AAAEL,MAAAA,IAAF;AAAQH,MAAAA,KAAR;AAAeO,MAAAA;AAAf,KAAb;AAEAF,IAAAA,OAAO,CAACI,IAAR,CAAa,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,CAACX,KAAF,GAAUU,CAAC,CAACV,KAAnC;AAEAL,IAAAA,YAAY,CAACiB,OAAb,CAAqB,SAArB,EAAgCnB,IAAI,CAACoB,SAAL,CAAeR,OAAf,CAAhC;AACD;;AAEDS,EAAAA,MAAM,GAAG;AAAA,wBACmC,KAAKhB,KADxC;AAAA,UACCC,UADD,eACCA,UADD;AAAA,UACaE,UADb,eACaA,UADb;AAAA,UACyBD,KADzB,eACyBA,KADzB;AAGP,WACE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAGE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAI,qBAAY,eAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKD,UAAU,GAAGE,UAAd,GACG,sBADH,GAEG,aAHP,CADF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEE;AAAM,qBAAY,sBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACID,KADJ,CAFF,QANF,EAaE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAEE;AAAM,qBAAY,yBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACID,UADJ,CAFF,CAbF,EAoBE;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,GAAT;AAAa,qBAAY,gBAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,EAIE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,UAAT;AAAoB,qBAAY,aAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAJF,CApBF,CAHF,CADF;AAoCD;;AAzEmC;;AA4EtC,SAASgB,eAAT,CAAyBjB,KAAzB,EAAgC;AAC9B,SAAO;AACLE,IAAAA,KAAK,EAAEF,KAAK,CAACkB,IAAN,CAAWhB;AADb,GAAP;AAGD;;AAED,eAAejB,OAAO,CAACgC,eAAD,EAAkB,IAAlB,CAAP,CAA+B7B,OAA/B,CAAf","sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport md5 from 'crypto-js/md5';\n\nimport Header from '../../components/Header';\n\nimport './styles.css';\n\nclass Results extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleRankingUpdate = this.handleRankingUpdate.bind(this);\n\n    const userScore = JSON.parse(localStorage.getItem('state')).player;\n\n    this.state = {\n      assertions: userScore.assertions,\n      score: userScore.score,\n      breakpoint: 3,\n      userScore,\n    };\n  }\n\n  componentDidMount() {\n    this.handleRankingUpdate();\n  }\n\n  handleRankingUpdate() {\n    const { userScore: { name, score, gravatarEmail } } = this.state;\n    const ranking = JSON.parse(localStorage.getItem('ranking')) || [];\n\n    const hashedEmail = md5(gravatarEmail);\n    const picture = `https://www.gravatar.com/avatar/${hashedEmail}`;\n\n    ranking.push({ name, score, picture });\n\n    ranking.sort((a, b) => b.score - a.score);\n\n    localStorage.setItem('ranking', JSON.stringify(ranking));\n  }\n\n  render() {\n    const { assertions, breakpoint, score } = this.state;\n\n    return (\n      <div className=\"results-page\">\n        <Header />\n\n        <div className=\"results-body\">\n          <h2 data-testid=\"feedback-text\">\n            { (assertions < breakpoint)\n              ? ('Podia ser melhor... ')\n              : ('Mandou bem!')}\n          </h2>\n          <h3>\n            Seu Score:\n            <span data-testid=\"feedback-total-score\">\n              { score }\n            </span>\n            pts\n          </h3>\n          <h4>\n            VocÃª acertou:\n            <span data-testid=\"feedback-total-question\">\n              { assertions }\n            </span>\n          </h4>\n\n          <div className=\"navigation-links\">\n            <Link to=\"/\" data-testid=\"btn-play-again\">\n                Jogar novamente\n            </Link>\n            <Link to=\"/ranking\" data-testid=\"btn-ranking\">\n                Ver Ranking\n            </Link>\n          </div>\n\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    score: state.user.score,\n  };\n}\n\nexport default connect(mapStateToProps, null)(Results);\n"]},"metadata":{},"sourceType":"module"}